scoreboard players reset @s ct.trigger
scoreboard players enable @s ct.trigger

execute store result score feedback ct.test run gamerule sendCommandFeedback
execute if score feedback ct.test matches 1 run scoreboard players set feedback ct.plan 1
execute if score feedback ct.test matches 1 if score feedback ct.plan matches 1 run gamerule sendCommandFeedback false
execute store result storage ct:settings actionbar float 0.1 run scoreboard players get track_delay ct.settings
execute store result storage ct:settings item float 0.1 run scoreboard players get refresh ct.settings

tellraw @s "\n"
tellraw @s [{"text":"\u00a7b調整> \u00a7e玩家偵測延遲","hoverEvent":{"action":"show_text","contents":{"translate":"目前是 %s","with":[{"nbt":"actionbar","storage":"ct:settings","color":"blue"}]}}},{"text":" ","hoverEvent":{"action":"show_text","contents":{"text":""}}},{"text":"\u00a7a[+0.1s]","clickEvent":{"action":"run_command","value":"/function ct:delay/actionbar/add"},"hoverEvent":{"action":"show_text","contents":{"text":"\u00a7a點擊以增加延遲"}}},{"text":" ","hoverEvent":{"action":"show_text","contents":{"text":""}}},{"text":"\u00a7c[-0.1s]","clickEvent":{"action":"run_command","value":"/function ct:delay/actionbar/subtract"},"hoverEvent":{"action":"show_text","contents":{"text":"\u00a7c點擊以縮短延遲"}}}]
tellraw @s [{"text":"\u00a7b調整> \u00a7e物品刷新延遲","hoverEvent":{"action":"show_text","contents":{"translate":"目前是 %s","with":[{"nbt":"item","storage":"ct:settings","color":"blue"}]}}},{"text":" ","hoverEvent":{"action":"show_text","contents":{"text":""}}},{"text":"\u00a7a[+0.1s]","clickEvent":{"action":"run_command","value":"/function ct:delay/item/add"},"hoverEvent":{"action":"show_text","contents":{"text":"\u00a7a點擊以增加延遲"}}},{"text":" ","hoverEvent":{"action":"show_text","contents":{"text":""}}},{"text":"\u00a7c[-0.1s]","clickEvent":{"action":"run_command","value":"/function ct:delay/item/subtract"},"hoverEvent":{"action":"show_text","contents":{"text":"\u00a7c點擊以縮短延遲"}}}]
execute if score show_distance ct.settings matches 1 run tellraw @s [{"text":"\u00a7b調整> \u00a7e啟用距離顯示","hoverEvent":{"action":"show_text","contents":{"text":"目前是 \u00a7a開啟"}}},{"text":" ","hoverEvent":{"action":"show_text","contents":{"text":""}}},{"text":"\u00a7a[開]","clickEvent":{"action":"run_command","value":"/function ct:distance/on"},"hoverEvent":{"action":"show_text","contents":{"text":"\u00a7a在快捷欄上顯示與目標間的距離"}}},{"text":" ","hoverEvent":{"action":"show_text","contents":{"text":""}}},{"text":"\u00a7c[關]","clickEvent":{"action":"run_command","value":"/function ct:distance/off"},"hoverEvent":{"action":"show_text","contents":{"text":"\u00a7c不顯示與目標間的距離"}}}]
execute if score show_distance ct.settings matches 0 run tellraw @s [{"text":"\u00a7b調整> \u00a7e啟用距離顯示","hoverEvent":{"action":"show_text","contents":{"text":"目前是 \u00a7c關閉"}}},{"text":" ","hoverEvent":{"action":"show_text","contents":{"text":""}}},{"text":"\u00a7a[開]","clickEvent":{"action":"run_command","value":"/function ct:distance/on"},"hoverEvent":{"action":"show_text","contents":{"text":"\u00a7a在快捷欄上顯示與目標間的距離"}}},{"text":" ","hoverEvent":{"action":"show_text","contents":{"text":""}}},{"text":"\u00a7c[關]","clickEvent":{"action":"run_command","value":"/function ct:distance/off"},"hoverEvent":{"action":"show_text","contents":{"text":"\u00a7c不顯示與目標間的距離"}}}]
execute if score use_y ct.settings matches 0 run tellraw @s [{"text":"\u00a7b調整> \u00a7e距離顯示模式","hoverEvent":{"action":"show_text","contents":{"text":"目前是 \u00a76二維"}}},{"text":" ","hoverEvent":{"action":"show_text","contents":{"text":""}}},{"text":"\u00a76[二維]","clickEvent":{"action":"run_command","value":"/function ct:distance/2d"},"hoverEvent":{"action":"show_text","contents":{"text":"\u00a76計算平面距離"}}},{"text":" ","hoverEvent":{"action":"show_text","contents":{"text":""}}},{"text":"\u00a76[三維]","clickEvent":{"action":"run_command","value":"/function ct:distance/3d"},"hoverEvent":{"action":"show_text","contents":{"text":"\u00a76計算平面與高度距離"}}}]
execute if score use_y ct.settings matches 1 run tellraw @s [{"text":"\u00a7b調整> \u00a7e距離顯示模式","hoverEvent":{"action":"show_text","contents":{"text":"目前是 \u00a76三維"}}},{"text":" ","hoverEvent":{"action":"show_text","contents":{"text":""}}},{"text":"\u00a76[二維]","clickEvent":{"action":"run_command","value":"/function ct:distance/2d"},"hoverEvent":{"action":"show_text","contents":{"text":"\u00a76計算平面距離"}}},{"text":" ","hoverEvent":{"action":"show_text","contents":{"text":""}}},{"text":"\u00a76[三維]","clickEvent":{"action":"run_command","value":"/function ct:distance/3d"},"hoverEvent":{"action":"show_text","contents":{"text":"\u00a76計算平面與高度距離"}}}]
tellraw @s [{"text":"\u00a7b調整> \u00a7e距離過遠閾值","hoverEvent":{"action":"show_text","contents":{"translate":"目前是 %s","with":[{"score":{"name":"distance_threshold_value","objective":"ct.settings"},"color":"blue"}]}}},{"text":" ","hoverEvent":{"action":"show_text","contents":{"text":""}}},{"text":"\u00a7a[+]","clickEvent":{"action":"run_command","value":"/function ct:distance/add"},"hoverEvent":{"action":"show_text","contents":{"text":"\u00a7a點擊以增加閾值"}}},{"text":" ","hoverEvent":{"action":"show_text","contents":{"text":""}}},{"text":"\u00a7c[-]","clickEvent":{"action":"run_command","value":"/function ct:distance/subtract"},"hoverEvent":{"action":"show_text","contents":{"text":"\u00a7c點擊以減少閾值"}}}]
tellraw @s "\n"

schedule function ct:plan 9.5s